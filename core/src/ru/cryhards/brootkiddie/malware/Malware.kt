package ru.cryhards.brootkiddie.malware


import ru.cryhards.brootkiddie.Player
import ru.cryhards.brootkiddie.malware.scripts.Script


abstract class Malware(val name: String, val player : Player) {
    var scripts = emptyList<Script>()

    var infectiousness = 0f
    var speed = 0f
    var irriration = 0f
    var places = 10
    var minedcrypto = 0f

    fun addScript(script: Script) {
        script.attach(this)
        scripts += script

        recalcStats()
    }

    fun getSize(): Int {
        val size = scripts.sumBy { it.getSize() }
        return size
    }

    open fun recalcStats() {
        infectiousness = 0f
        speed = 0f
        minedcrypto = 0f
        irriration = getSize()/places.toFloat()

        for (script in scripts) {
            script.act()
        }
    }
}