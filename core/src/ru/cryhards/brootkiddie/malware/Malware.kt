package ru.cryhards.brootkiddie.malware

import ru.cryhards.brootkiddie.malware.scripts.Script

abstract class Malware(val name: String) {
    var scripts = emptyList<Script>()

    var infectiousness = 0f
    var visibility = 0f

    fun addScript(script: Script) {
        script.attach(this)
        scripts += script
    }

    fun getSize(): Int {
        val size = scripts.sumBy { it.getSize() }
        return size
    }

    open fun recalcStats() {
        infectiousness = 0f
        visibility = 0f

        for (script in scripts) {
            script.act()
        }
    }
}