package ru.cryhards.brootkiddie.logic

import android.util.Log

/**
 * Created by Dima on 24.12.2017.
 */
class Malware (val type : MalwareTypes, val size : Int, val name : String, val player : Player, val criticalChance : Float) {
    var count = 0
    var codeblocks = mutableListOf<CodeBlock>()
    var effects = mutableListOf<Effect>()
    var discoverChance = countWeight()/3f
    var irritation = 1f
    fun action () {
        var irritation = countWeight()/2000f
        for (block in codeblocks) block.action(count)
        for (effect in effects) effect.action()
        discoverChance += irritation
        if (discoverChance > criticalChance) {count-=(count*discoverChance).toInt()}
        effects.clear()
    }

    fun countWeight() : Float {
        var weigth = 0f
        for (block in codeblocks) weigth+=block.weight
        return weigth
    }
}